<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <!--<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>-->    

    <ui:composition template="/WEB-INF/template.xhtml">
        <ui:define name="subheader">
            Page Header
        </ui:define>

        <ui:define name="content">
            <div class="Container100">
                <div class="ContainerIndent">
                    <div class="Card ">
                        <div class="ui-fluid">
                            <f:event type="preRenderView" listener="#{agenteController.findAgente(request.getUserPrincipal().toString())}" ></f:event>

                            <p:growl globalOnly="true" for="growlprincipal" id="growlprincipal" showDetail="true" sticky="true" />

                            <div class="CardTopic"> 
                                <i class="icon-share Fs30 Fleft MarRight10"></i>

                                <div class="EmptyBox10 ShowOnMobile"></div>
                                Alta de Idea-Proyecto <br />
                                <span class="CardSubTopic"> Idea-Proyecto </span> 

                                <div class="SeparatorFull"></div>

                                <p:tabView id="tabviewTodo" styleClass="Container100 Responsive100 Fs12" > 
                                    <!--<p:tabView id="tabviewTodo" flowListener="# {proyectoController.onFlowProcess}">-->

                                    <p:tab id="tabideaproyecto" title="Idea-Proyecto">

                                        <h:form id="formTabIdeaProyecto">

                                            <p:panelGrid columns="2" columnClasses="ui-grid-col-1,ui-grid-col-11" layout="grid" styleClass="ui-panelgrid-blank" >
                                                <h:outputText value="Nombre" styleClass="ContainerIndent Fs18 FontAdamantiumBold" />
                                                <p:inputText id="nombre" required="true" requiredMessage="Ingrese el nombre de la Idea-Proyecto" style="font-weight:bold;font-size:larger; " value="#{proyectoController.selected.nombre}" title="Título de la Idea-Proyecto" placeholder="Título de la Idea-Proyecto" styleClass="ui-grid-col-12" />
                                            </p:panelGrid>

                                            <p:separator style="margin-top: 10px; margin-bottom: 10px;" />

                                            <div class="Container50 Responsive100" >
                                                <div class="Container100">
                                                    <div class="ContainerIndent">
                                                        <div class="Card">
                                                            <div class="CardTopic">
                                                                <i class="fa fa-hand-o-right Fs30 Fleft MarRight10"></i>
                                                                <div class="EmptyBox10 ShowOnMobile"></div>
                                                                Tipo de Proyecto <br />
                                                                <span class="CardSubTopic">Seleccionar el tipo de la idea-proyecto.</span> </div>
                                                            <div class="SeparatorFull"></div>

                                                            <p:selectOneMenu id="tipoproyectoid" value="#{proyectoController.selected.tipoproyectoid}" required="true" requiredMessage="Seleccione Tipo de Proyecto" >
                                                                <f:selectItems value="#{tipoproyectoController.itemsAvailableSelectOne}"/>
                                                                <p:ajax update=":tabviewTodo:formTabConvocatoria:tconvocatoria" listener="#{convocatoriaController.findConvocatoriasPorTipoProyectoTipoFinanciamientoAbierta(proyectoController.selected.tipoproyectoid.id, proyectoController.selected.tipofinanciamientoid.id)}" />
                                                            </p:selectOneMenu>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="Container50 Responsive100" >
                                                <div class="Container100">
                                                    <div class="ContainerIndent">
                                                        <div class="Card">
                                                            <div class="CardTopic">
                                                                <i class="fa fa-forward Fs30 Fleft MarRight10"></i>
                                                                <div class="EmptyBox10 ShowOnMobile"></div>
                                                                Avance de la Idea-Proyecto <br />
                                                                <span class="CardSubTopic">Seleccionar el avance actual de la idea-proyecto.</span> </div>
                                                            <div class="SeparatorFull"></div>

                                                            <p:selectOneMenu widgetVar="wavanceproyectoid" id="avanceproyectoid"  value="#{proyectoController.selected.avanceproyectoid}" label="Avance de Proyecto" required="true" requiredMessage="Seleccione el estado de avance"  >
                                                                <f:selectItems  value="#{avanceproyectoController.itemsAvailableSelectOne}"/>
                                                            </p:selectOneMenu>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </h:form>

                                    </p:tab>

                                    <p:tab id="tabcomitente" title="Responsables">

                                        <h:form id="formTabComitente">

                                            <div class="Container100">

                                                <div class="ContainerIndent">

                                                    <!-- RESPONSABLE TECNICO -->
                                                    <div class="Card">
                                                        <div class="CardTopic">
                                                            <i class="fa fa-certificate Fs30 Fleft MarRight10"></i>

                                                            <div class="EmptyBox10 ShowOnMobile"></div>
                                                            Responsable Técnico
                                                            <br/>
                                                            <span class="CardSubTopic">Confirmar los datos del responsable técnico.</span>
                                                        </div>

                                                        <div class="SeparatorFull"></div>

                                                        <p:panelGrid id="pagente" styleClass="ui-noborder Container100" style="margin-bottom: 10px;" >
                                                            <p:row styleClass="SoftBlueBack">
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold; color: white; " value="Apellido"/>
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold; color: white; " value="Nombres"/>
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold; color: white; " value="Documento"/>
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold; color: white; " value="Profesion"/>
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold; color: white; " value="Especialidad"/>
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold; color: white; " value="Email"/>
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold; color: white; " value="Dependencia"/>
                                                                </p:column>
                                                            </p:row>

                                                            <p:row>
                                                                <p:column>
                                                                    <p:outputLabel value="#{agenteController.selected.apellido}" title="Apellido" />
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel value="#{agenteController.selected.nombres}" title="Nombres" />
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel value="#{agenteController.selected.tipodocumentoid.tipodocumento} - #{agenteController.selected.numerodocumento}" title="Tipo de Documento" rendered="#{not empty agenteController.selected.tipodocumentoid.tipodocumento}"/>
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel value="#{agenteController.selected.profesion}" title="Profesion" />
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel value="#{agenteController.selected.especialidad}" title="Especialidad" />
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel value="#{agenteController.selected.email}" title="Email" />
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel value="#{agenteController.selected.dependenciaid.dependencia}" title="Dependencia" />
                                                                </p:column>

                                                            </p:row>
                                                        </p:panelGrid>

                                                        <p:separator />

                                                        <!--<p:commandButton onclick="dagenteeditar.show()" type="button" value="Editar Responsable Técnico" />-->
                                                        <p:commandButton value="Editar Responsable Técnico" onclick="PF('dagenteeditar').show();" immediate="true"  styleClass="GreenButton" style="width: auto; "  />

                                                    </div>

                                                    <!-- COMITENTE -->
                                                    <div class="Card MarTop20">
                                                        <div class="CardTopic">
                                                            <i class="fa fa-suitcase Fs30 Fleft MarRight10"></i>

                                                            <div class="EmptyBox10 ShowOnMobile"></div>
                                                            Comitente
                                                            <br/>
                                                            <span class="CardSubTopic">Ingresar los datos del comitente.</span>
                                                        </div>

                                                        <div class="SeparatorFull"></div>

                                                        <p:selectOneRadio id="options" value="#{proyectoController.habilitarcomitente}"   >
                                                            <f:selectItem itemLabel="No" itemValue="0"  />
                                                            <f:selectItem itemLabel="Si" itemValue="1" />
                                                            <!--<p:ajax update="phabilitarcomitente" event="valueChange" />-->
                                                            <p:ajax update=":tabviewTodo:formTabComitente :tabviewTodo:formTabPresupuesto" />
                                                        </p:selectOneRadio>

                                                        <p:separator rendered="#{proyectoController.habilitarcomitente eq '1'}" />

                                                        <p:outputPanel id="phabilitarcomitente"  rendered="#{proyectoController.habilitarcomitente eq '1'}" >
                                                            <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-3, ui-grid-col-9"  >
                                                                <p:outputLabel value="Ingrese el N° de CUIT/CUIL" styleClass="FontAdamantiumBold DispBlock MarTop10" />

                                                                <p:selectOneMenu widgetVar="comitentedid" id="comitenteid"  value="#{proyectoController.selected.comitenteid}" label="Comitente" filter="true" filterMatchMode="contains"  >
                                                                    <f:selectItems  value="#{comitenteController.itemsAvailableSelectOne}"/>
                                                                    <p:ajax update="pgcomitente, :formDetallesComitente:detallesComitente" event="change" />
                                                                </p:selectOneMenu>
                                                            </p:panelGrid>

                                                            <p:separator rendered="#{not empty proyectoController.selected.comitenteid.razonsocial}"/>

                                                            <p:panelGrid id="pgcomitente" style="width: 100%; margin-top: 10px;"  styleClass="ui-noborder" >
                                                                <p:row rendered="#{not empty proyectoController.selected.comitenteid.razonsocial}" styleClass="SoftBlueBack White">
                                                                    <p:column ><p:outputLabel style="font-weight:bold; color: white; " value="Tipo"/></p:column>
                                                                    <p:column ><p:outputLabel style="font-weight:bold; color: white; " value="Contacto"/></p:column>
                                                                    <p:column ><p:outputLabel style="font-weight:bold; color: white; " value="Cargo del Contacto"/></p:column>
                                                                    <p:column ><p:outputLabel style="font-weight:bold; color: white; " value="Sector" /></p:column>
                                                                    <p:column ></p:column>
                                                                </p:row>
                                                                <p:row rendered="#{not empty proyectoController.selected.comitenteid.razonsocial}">
                                                                    <p:column>
                                                                        <p:outputLabel value="#{proyectoController.selected.comitenteid.tipocomitenteid.tipocomitente}" title="Tipo" rendered="#{not empty proyectoController.selected.comitenteid.razonsocial}"/>
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:outputLabel value="#{proyectoController.selected.comitenteid.contacto}" title="Contacto" rendered="#{not empty proyectoController.selected.comitenteid.razonsocial}"/>
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:outputLabel value="#{proyectoController.selected.comitenteid.cargocontacto}" title="Cargo del Contacto" rendered="#{not empty proyectoController.selected.comitenteid.razonsocial}"/>
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:outputLabel value="#{proyectoController.selected.comitenteid.sectorid.sector}" title="Sector" rendered="#{not empty proyectoController.selected.comitenteid.sectorid.sector}"/>
                                                                    </p:column>
                                                                    <p:column>
                                                                        <p:commandButton rendered="#{proyectoController.selected.comitenteid ne null}" id="detalleComitenteBtn" title="Detalles" icon="fa fa-search" styleClass="GreenButton White"
                                                                                         onclick="PF('detallesComitente').show()" immediate="true" />
                                                                    </p:column>
                                                                </p:row>
                                                            </p:panelGrid>

                                                            <p:commandButton value="Crear Comitente" onclick="PF('dcomitentecrear').show();"
                                                                             immediate="true" styleClass="GreenButton White" style="width: auto; "  />

                                                        </p:outputPanel>
                                                    </div>

                                                </div>
                                            </div>

                                        </h:form>

                                    </p:tab>

                                    <p:tab id="tabdocumentacion" title="Descripción">

                                        <h:form id="formTabDocumentacion" enctype="multipart/form-data" >

                                            <div class="Container100">

                                                <div class="ContainerIndent">

                                                    <!-- DESCRIPCIÓN -->
                                                    <div class="Card">
                                                        <div class="CardTopic">
                                                            <i class="icon-quote Fs30 Fleft MarRight10"></i>

                                                            <div class="EmptyBox10 ShowOnMobile"></div>
                                                            Descripción
                                                            <br/>
                                                            <span class="CardSubTopic">Ingresar el resumen y observaciones de la Idea-Proyecto. </span>
                                                        </div>

                                                        <div class="SeparatorFull"></div>

                                                        <p:panelGrid columnClasses="right,left" styleClass="ui-panelgrid-blank Wid100">
                                                            <p:row>
                                                                <p:column style="width: 100%;" colspan="2">
                                                                    <p:outputLabel value="Resumen" for="resumen" styleClass="FontAdamantiumBold Fs14 " style="color: #439fe0;" />
                                                                    <p:inputTextarea rows="5" id="resumen" value="#{proyectoController.selected.resumen}" title="Resumen" maxlength="2500" autoResize="true" required="true" requiredMessage="Ingrese Diagnostico y resumen descriptivo " counter="contadorResumen"  counterTemplate="{0} caracteres restantes." style="width: 100%;" />
                                                                    <h:outputText id="contadorResumen" />
                                                                </p:column>
                                                            </p:row>
                                                        </p:panelGrid>

                                                        <div class="Separator"></div>

                                                        <p:panelGrid columnClasses="right,left" styleClass="ui-panelgrid-blank Wid100">
                                                            <p:row>
                                                                <p:column style="width: 100%;" colspan="2" >
                                                                    <p:outputLabel value="Objetivos" for="observaciones" styleClass="FontAdamantiumBold Fs14 " style="color: #439fe0;" />
                                                                    <p:inputTextarea rows="5" id="observaciones" value="#{proyectoController.selected.observaciones}" title="Observaciones" maxlength="2500" autoResize="true" required="true" requiredMessage="Objetivos y Resultados Esperados" style="width: 100%;" counter="contadorObservaciones"  counterTemplate="{0} caracteres restantes." />
                                                                    <h:outputText id="contadorObservaciones" />
                                                                </p:column>
                                                            </p:row>

                                                        </p:panelGrid>

                                                        <div class="Separator"></div>

                                                        <p:panelGrid columnClasses="right,left" styleClass="ui-panelgrid-blank Wid100">

                                                            <p:row>
                                                                <p:column style="width: 25%;">
                                                                    <p:outputLabel value="Lugar (Domicilio)" for="localizacion" styleClass="FontAdamantiumBold Fs14 " style="color: #439fe0;" />
                                                                </p:column>
                                                                <p:column style="width: 75%;">
                                                                    <p:inputTextarea rows="1" id="localizacion" value="#{proyectoController.selected.localizacion}" title="localizacion" placeholder="Por ejemplo = Martin Fierro 1054 - Chilecito, La Rioja" required="true" requiredMessage="Ingrese la localización" style="width: 100%;" />
                                                                </p:column>
                                                            </p:row>
                                                            <p:row>
                                                                <p:column style="width: 25%;">
                                                                    <p:outputLabel value="Duración (Meses)" for="duracion" styleClass="FontAdamantiumBold Fs14 " style="color: #439fe0;" />
                                                                </p:column>
                                                                <p:column style="width: 75%;">
                                                                    <p:spinner id="duracion" value="#{proyectoController.selected.duracion}"
                                                                               title="duracion" min="1" maxlength="3"
                                                                               required="true" requiredMessage="Por favor, ingrese la duración (meses) del proyecto." style="width: 100px;"  />
                                                                </p:column>
                                                            </p:row>
                                                        </p:panelGrid>
                                                    </div>

                                                    <!-- DOCUMENTACION -->
                                                    <div class="Card MarTop20">
                                                        <div class="CardTopic">
                                                            <i class="fa fa-file-text Fs30 Fleft MarRight10"></i>

                                                            <div class="EmptyBox10 ShowOnMobile"></div>
                                                            Documentación
                                                            <br/>
                                                            <span class="CardSubTopic">Subir archivos de documentación extra de la Idea-Proyecto. Se permite gif, jpg, png, doc, docx y pdf.</span>
                                                        </div>

                                                        <div class="SeparatorFull"></div>

                                                        <p:panelGrid columnClasses="ui-grid-col-4,ui-grid-col-8" columns="2" layout="grid" styleClass="ui-panelgrid-blank">

                                                            <p:fileUpload label="Subir Archivos" id="documentacion"
                                                                          fileUploadListener="#{archivoproyectoController.handleFileUpload}" mode="advanced"
                                                                          sizeLimit="10000000" multiple="true" auto="true" styleClass="SubirArchivo"
                                                                          allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|pdf)$/"
                                                                          update=":tabviewTodo:formTabDocumentacion:tdocumentacionnombre1"
                                                                          invalidFileMessage="El archivo no es del tipo permitido. Los tipos permitidos son: gif, jpg, png, doc, docx, pdf."
                                                                          invalidSizeMessage="El archivo no tiene el tamaño permitido. El tamaño máximo es de 10 MBytes."  >

                                                            </p:fileUpload>

                                                            <p:dataTable id="tdocumentacionnombre1" var="arc"
                                                                         value="#{archivoproyectoController.collectorArchivoProyecto}"
                                                                         styleClass="tabla tablaAjustada TablaColorEncabezado" emptyMessage="No se subieron archivos." >

                                                                <p:column headerText="Archivos">
                                                                    <h:outputText value="#{arc.nombre}" />
                                                                </p:column>
                                                                <p:column headerText="">
                                                                    <p:commandButton immediate="true" icon="fa fa-trash" title="Quitar el Archivo"
                                                                                     action="#{archivoproyectoController.removerArchivoCollection}"
                                                                                     update=":tabviewTodo:formTabDocumentacion:tdocumentacionnombre1"
                                                                                     styleClass="RedButton White" style="width: auto; " >
                                                                        <f:setPropertyActionListener value="#{arc}" target="#{archivoproyectoController.selected}" />
                                                                    </p:commandButton>

                                                                </p:column>
                                                            </p:dataTable>

                                                        </p:panelGrid>

                                                    </div>

                                                </div>
                                            </div>

                                        </h:form>

                                    </p:tab>

                                    <p:tab id="tabconvocatoria" title="Financiamiento">

                                        <h:form id="formTabConvocatoria">

                                            <div class="Container100">

                                                <div class="ContainerIndent">

                                                    <div class="Card">
                                                        <div class="CardTopic">
                                                            <i class="icon-wallet Fs30 Fleft MarRight10"></i>
                                                            <div class="EmptyBox10 ShowOnMobile"></div>
                                                            Opciones de Financiamiento
                                                            <br />
                                                            <span class="CardSubTopic">Ingresar las opciones de financiamiento.</span>
                                                        </div>

                                                        <div class="SeparatorFull"></div>

                                                        <p:panelGrid columnClasses="right,left" styleClass="ui-panelgrid-blank" >
                                                            <p:row>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold;font-size:larger"  value="Beneficiario" for="beneficiarioid" />
                                                                </p:column>
                                                                <p:column style="width: 50%;" >
                                                                    <p:selectOneMenu widgetVar="beneficiarioid" id="beneficiarioid" value="#{proyectoController.selected.beneficiarioid}" label="Beneficiario" required="true" requiredMessage="Seleccione Beneficiario" style="width:100%;">
                                                                        <f:selectItems value="#{beneficiarioController.itemsAvailableSelectOne}"/>
                                                                    </p:selectOneMenu>
                                                                </p:column>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold;font-size:larger"  value="Modalidad de Presentación" for="fuentefinanciamientoid" />
                                                                </p:column>
                                                                <p:column style="width: 50%;">
                                                                    <p:selectOneMenu widgetVar="fuentefinanciamientoid" id="fuentefinanciamientoid" value="#{proyectoController.selected.fuentefinanciamientoid}" label="Fuente de Financiamiento" required="true" requiredMessage="Seleccione Fuente de Financiamiento" style="width:100%;" >
                                                                        <f:selectItems value="#{fuentefinanciamientoController.itemsAvailableSelectOne}"/>
                                                                    </p:selectOneMenu>
                                                                </p:column>
                                                            </p:row>

                                                            <p:row>
                                                                <p:column>
                                                                    <p:outputLabel style="font-weight:bold;font-size:larger"  value="Tipo de Financiamiento" for="tipofinanciamientoid" />
                                                                </p:column>
                                                                <p:column colspan="3">
                                                                    <p:selectOneMenu widgetVar="tipofinanciamientoid" id="tipofinanciamientoid" value="#{proyectoController.selected.tipofinanciamientoid}" label="Tipo de Financiamiento" required="true" requiredMessage="Seleccione el Tipo de Financiamiento" style="width: 100%;" >
                                                                        <f:selectItems value="#{tipofinanciamientoController.itemsAvailableSelectOne}"/>
                                                                        <p:ajax update=":tabviewTodo:formTabConvocatoria:tconvocatoria" listener="#{convocatoriaController.findConvocatoriasPorTipoProyectoTipoFinanciamientoAbierta(proyectoController.selected.tipoproyectoid.id, proyectoController.selected.tipofinanciamientoid.id)}" />
                                                                    </p:selectOneMenu>
                                                                </p:column>
                                                            </p:row>
                                                        </p:panelGrid>
                                                    </div>

                                                    <div class="Card MarTop20">
                                                        <div class="CardTopic">
                                                            <i class="fa fa-volume-up Fs30 Fleft MarRight10"></i>
                                                            <div class="EmptyBox10 ShowOnMobile"></div>
                                                            Convocatoria
                                                            <br />
                                                            <span class="CardSubTopic">Las convocatorias se filtran de acuerdo al tipo de proyecto y al tipo de financiamiento.</span>
                                                        </div>
                                                    </div>

                                                    <p:dataTable id="tconvocatoria" widgetVar="wconvocatoria" paginator="true"
                                                                 var="conv"
                                                                 value="#{convocatoriaController.listaConvocatorias}"
                                                                 filteredValue="#{convocatoriaController.tablafiltrada}"
                                                                 selection="#{convocatoriaController.selected}"
                                                                 rowKey="#{conv.id}" selectionMode="single"
                                                                 paginatorPosition="bottom"
                                                                 styleClass="tabla tablaAjustada TablaColorEncabezado" emptyMessage="No hay convocatorias abiertas, con los valores de filtro.">

                                                        <p:ajax event="rowSelect" listener="#{convocatoriaController.solicitudSeleccionConvocatoria()}" />

                                                        <!--<p:column selectionMode="single"/>-->
                                                        <p:column headerText="Convocatoria" sortBy="#{conv.convocatoria}">
                                                            <h:outputText value="#{conv.convocatoria}" />
                                                        </p:column>

                                                        <p:column headerText="Organismo" sortBy="#{conv.organismo}">
                                                            <h:outputText value="#{conv.organismo}" />
                                                        </p:column>
                                                        <p:column headerText="Tipo de Proyecto" sortBy="#{conv.tipoproyectoid.tipo}" filterBy="#{conv.tipoproyectoid.tipo}" filterMatchMode="exact" >
                                                            <f:facet name="filter">
                                                                <p:selectOneMenu onchange="PF('wconvocatoria').filter()" >
                                                                    <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" noSelectionOption="true" />
                                                                    <f:selectItems value="#{tipoproyectoController.itemsAvailableSelectOne}" />
                                                                </p:selectOneMenu>
                                                            </f:facet>
                                                            <h:outputText value="#{conv.tipoproyectoid.tipo}" />
                                                        </p:column>
                                                        <p:column headerText="Tipo de Financiamiento" sortBy="#{conv.tipofinanciamientoid.tipofinanciamiento}" filterBy="#{conv.tipofinanciamientoid.tipofinanciamiento}" filterMatchMode="exact" >
                                                            <f:facet name="filter">
                                                                <p:selectOneMenu onchange="PF('wconvocatoria').filter()" >
                                                                    <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" noSelectionOption="true" />
                                                                    <f:selectItems value="#{tipofinanciamientoController.itemsAvailableSelectOne}" />
                                                                </p:selectOneMenu>
                                                            </f:facet>
                                                            <p:outputLabel value="#{conv.tipofinanciamientoid.tipofinanciamiento}"  />
                                                        </p:column>
                                                        <p:column headerText="Fecha de Cierre" sortBy="#{conv.fechacierre}">
                                                            <h:outputText value="#{conv.fechacierre}">
                                                                <f:convertDateTime type="date" pattern="dd-MM-yyyy" />
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Monto Financiamiento" sortBy="#{conv.montofinanciamiento}">
                                                            <h:outputText value="#{conv.montofinanciamiento}" />
                                                        </p:column>
                                                        <p:column headerText="Link">
                                                            <a target="_blank" href="#{conv.link}" >Link</a>
                                                        </p:column>
                                                        <p:column headerText=" " style="width: auto;">
                                                            <p:commandButton id="viewButton"  rendered="#{convocatoriaController.selected ne null}" icon="fa fa-search"  title="Ver Detalle de Convocatoria" styleClass="GreenButton White" style="width: auto; "
                                                                             update=":formDialogoConvocatoria:dconvocatoria" oncomplete="PF('dconvocatoria').show()" >
                                                                <f:setPropertyActionListener value="#{conv}" target="#{convocatoriaController.selected}" />
                                                            </p:commandButton>
                                                        </p:column>
                                                    </p:dataTable>

                                                </div>
                                            </div>


                                        </h:form>

                                    </p:tab>

                                    <p:tab id="tabpresupuesto" title="Presupuesto">

                                        <h:form id="formTabPresupuesto">

                                            <!--<p:remoteCommand name="rcPresupuesto" actionListener="# {presupuestoRubroController.sumarGastos(null)}"
                                                             update="
                                                             panelTotalesRubro,
                                                             caportes,
                                                             crubros,
                                                             growlprincipal "/>-->
                                            <div class="Container100">
                                                <div class="ContainerIndent">
                                                    <div class="Card">
                                                        <div class="CardTopic">
                                                            <i class="fa fa-usd Fs30 Fleft MarRight10"></i>
                                                            <div class="EmptyBox10 ShowOnMobile"></div>
                                                            Armar Presupuesto
                                                            <br />
                                                            <span class="CardSubTopic">Ingresar los importes para cada rubro y tipo de aporte.</span>
                                                        </div>
                                                    </div>

                                                    <p:dataTable id="tpresupuesto" value="#{presupuestoRubroController.presupuestosrubros}"
                                                                 var="item" editable="true" editMode="cell" style="width:100%;"
                                                                 rowIndexVar="indice"
                                                                 styleClass="tabla TablaColorEncabezado"
                                                            >

                                                        <p:ajax event="cellEdit" listener="#{presupuestoRubroController.sumarGastos}"
                                                                update="
                                                        :tabviewTodo:formTabPresupuesto:panelTotalesRubro,
                                                        :tabviewTodo:formTabPresupuesto:tpresupuestototales,
                                                        :tabviewTodo:formTabPresupuesto:caportes,
                                                        :tabviewTodo:formTabPresupuesto:crubros
                                                        "  />

                                                        <p:column style="width:20%" >
                                                            <f:facet name="header">
                                                                <h:outputText value="Rubro"/>
                                                            </f:facet>
                                                            <h:outputText style="width:96%;" value="#{item.rubro.abreviado}" />
                                                        </p:column>

                                                        <p:column style="width:20%;"  >
                                                            <f:facet name="header">
                                                                <h:outputText value="Aporte Universidad" style="font-weight: bold;"  title="Click en la celda e ingrese el importe."/>
                                                                <br />
                                                                <p:commandButton id="ayudaPresupuestoAporteUniversidad" icon="fa fa-question" styleClass="CyanButton White"  actionListener="#{ayudaController.setearTextoAyudaPorClave('AyudaIPpresupuestoAporteUniversidad')}" oncomplete="PF('wdialogoAyuda').show();" update="dialogoAyuda" style="height: 15px; " />
                                                                <p:overlayPanel for="ayudaPresupuestoAporteUniversidad" showEvent="mouseover" hideEvent="mouseout" hideEffect="fade" >
                                                                    <h:outputText value="Click en la celda para ingresar el importe del rubro y tipo de aporte." />
                                                                </p:overlayPanel>
                                                            </f:facet>
                                                            <p:cellEditor>
                                                                <f:facet name="output">
                                                                    <h:outputText value="$ #{item.gastouniversidad}" styleClass="TexAlRight Fright" >
                                                                        <f:convertNumber pattern="#0.00" />
                                                                    </h:outputText>
                                                                </f:facet>
                                                                <f:facet name="input">
                                                                    <p:inputText id="gastouniversidad" value="#{item.gastouniversidad}" styleClass="TexAlRight" />
                                                                </f:facet>
                                                            </p:cellEditor>
                                                        </p:column>

                                                        <p:column style="width:20%; "  >
                                                            <f:facet name="header">
                                                                <h:outputText value="Aporte Organismo" style="font-weight: bold;" title="Click en la celda e ingrese el importe."/>
                                                                <br />
                                                                <p:commandButton id="ayudaPresupuestoAporteOrganismo" icon="fa fa-question" styleClass="CyanButton White"  actionListener="#{ayudaController.setearTextoAyudaPorClave('AyudaIPpresupuestoAporteOrganismo')}" oncomplete="PF('wdialogoAyuda').show();" update="dialogoAyuda" style="height: 15px; " />
                                                                <p:overlayPanel for="ayudaPresupuestoAporteOrganismo" showEvent="mouseover" hideEvent="mouseout" hideEffect="fade" >
                                                                    <h:outputText value="Click en la celda para ingresar el importe del rubro y tipo de aporte." />
                                                                </p:overlayPanel>
                                                            </f:facet>
                                                            <p:cellEditor>
                                                                <f:facet name="output">
                                                                    <h:outputText value="$ #{item.gastoorganismo}" styleClass="TexAlRight Fright">
                                                                        <f:convertNumber pattern="#0.00" />
                                                                    </h:outputText>
                                                                </f:facet>
                                                                <f:facet name="input">
                                                                    <p:inputText id="gastoorganismo" value="#{item.gastoorganismo}"  styleClass="TexAlRight" />
                                                                </f:facet>
                                                            </p:cellEditor>
                                                        </p:column>

                                                        <p:column style="width:20%;" styleClass="#{(proyectoController.habilitarcomitente eq '0')?'GrayBack Gray':''} "  >
                                                            <f:facet name="header">
                                                                <h:outputText value="Aporte Comitente" style="font-weight: bold;" title="Click en la celda e ingrese el importe."/>
                                                                <br />
                                                                <h:outputText rendered="#{proyectoController.habilitarcomitente eq '0'}" value="Deshabilitado" title="Deshabilitado debido a que se seleccionó que no hay comitente." style="color: #000 !important;"/>
                                                                <br />
                                                                <p:commandButton id="ayudaPresupuestoAporteComitente" icon="fa fa-question"
                                                                                 styleClass="CyanButton White"
                                                                                 actionListener="#{ayudaController.setearTextoAyudaPorClave('AyudaIPpresupuestoAporteComitente')}"
                                                                                 oncomplete="PF('wdialogoAyuda').show();" update="dialogoAyuda" style="height: 15px; "
                                                                                 rendered="#{proyectoController.habilitarcomitente eq '1'}" />
                                                                <p:overlayPanel for="ayudaPresupuestoAporteComitente" showEvent="mouseover" hideEvent="mouseout" hideEffect="fade"
                                                                                rendered="#{proyectoController.habilitarcomitente eq '1'}" >
                                                                    <h:outputText value="Click en la celda para ingresar el importe del rubro y tipo de aporte." />
                                                                </p:overlayPanel>
                                                            </f:facet>
                                                            <p:cellEditor rendered="#{proyectoController.habilitarcomitente eq '1'}" >
                                                                <f:facet name="output">
                                                                    <h:outputText value="$ #{item.gastocomitente}" styleClass="TexAlRight Fright">
                                                                        <f:convertNumber pattern="#0.00" />
                                                                    </h:outputText>
                                                                </f:facet>
                                                                <f:facet name="input">
                                                                    <p:inputText id="gastocomitente" value="#{item.gastocomitente}"  styleClass="TexAlRight" />
                                                                </f:facet>
                                                            </p:cellEditor>

                                                        </p:column>

                                                    </p:dataTable>

                                                    <p:dataTable id="tpresupuestototales" value="#{presupuestoRubroController.presupuestosrubros}"
                                                                 var="item" rows="1"
                                                                 rowIndexVar="indice"
                                                                 rowStyleClass="#{(fn:length(presupuestoRubroController.presupuestosrubros) mod 2) eq 0 ? 'filaResaltada1' : 'filaResaltada2' }"
                                                                 styleClass="tabla esconder-cabecera-columnas" >

                                                        <p:column style="width:20%" styleClass="TexAlLeft ">
                                                            <h:outputText value="Totales de Aportes" styleClass="FontAdamantiumBold Fleft Fs18" style="color: #439fe0; "/>
                                                        </p:column>

                                                        <p:column style="width:20%;" styleClass="TexAlRight">
                                                            <h:outputText value="$ #{presupuestoRubroController.obtenerTotalGastosUniversidad()}" styleClass="FontAdamantiumBold Fright Fs18" style="color: #439fe0; ">
                                                                <f:convertNumber pattern="#0.00" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:column style="width:20%; " styleClass="TexAlRight">
                                                            <h:outputText value="$ #{presupuestoRubroController.obtenerTotalGastosOrganismo()}" styleClass="FontAdamantiumBold Fright Fs18" style="color: #439fe0; ">
                                                                <f:convertNumber pattern="#0.00" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:column style="width:20%;" styleClass="#{(proyectoController.habilitarcomitente eq '0')?'GrayBack Gray TexAlRight':'TexAlRight'} ">
                                                            <h:outputText value="$ #{presupuestoRubroController.obtenerTotalGastosComitente()}"
                                                                          styleClass="FontAdamantiumBold Fright Fs18" style="color: #439fe0; "
                                                                          rendered="#{proyectoController.habilitarcomitente eq '1'}">
                                                                <f:convertNumber pattern="#0.00" />
                                                            </h:outputText>
                                                        </p:column>

                                                    </p:dataTable>



                                                    <div class="Separator" />

                                                    <p:outputPanel id="panelTotalesRubro">

                                                        <ui:repeat var="item" value="#{presupuestoRubroController.presupuestosrubros}" varStatus="estado">

                                                            <div class="Container Responsive DispTableCell">

                                                                <div class="ContainerIndent Padding5px">

                                                                    <div class="Card SoftGrayBack Padding15px ">
                                                                        <i class="#{item.rubro.icono} Fs40 Fleft MarRight10" style="color: #{item.rubro.coloricono};"></i>
                                                                        <div class="Fleft DispInlBlock">
                                                                            <span class="Fs12 FontAdamantiumBold Gray"><h:outputText value="#{item.rubro.nombreAntesEspacio()}" /> </span> <br />
                                                                        <span class="Fs20 FontAdamantiumBold">
                                                                            <!--<h:outputText value="$ # {item.gastouniversidad.add(item.gastoorganismo.add(item.gastocomitente))}" >-->
                                                                            <h:outputText value="$ #{item.total}" >
                                                                                <f:convertNumber pattern="#0.00" />
                                                                            </h:outputText>
                                                                        </span> <br />
                                                                            <span class="Fs11 FontAdamantiumRegular Green"> <h:outputText value="#{item.rubro.nombreDespuesEspacio()}" />  </span>
                                                                        </div>
                                                                    </div>

                                                                </div>

                                                            </div>

                                                        </ui:repeat>

                                                        <div class="Container100 Responsive100 Mar5">
                                                            <div class="Card GrisNortiaBack White TexAlCenter HoverEffect">
                                                                <div class="FontRobotoBold Fs30 White DispBlock ClearBoth">
                                                                    <h:outputText value="$ #{presupuestoRubroController.obtenerTotalGeneral()}" />
                                                                </div>
                                                                <div class="EmptyBox10"/>
                                                                <div class="FontRobotoLight Fs14 White Fright DispBlock ClearBoth">Total Presupuestado</div>
                                                            </div>
                                                        </div>

                                                        <!--Total General-->
                                                        <!--<div class="Container100 Responsive100">

                                                            <div class="ContainerIndent ">

                                                                <div class="Card SoftGrayBack Padding15px ">
                                                                    <i class="fa fa-money Fs40 Fleft MarRight10 Blue" ></i>
                                                                    <div class="Fleft DispInlBlock">
                                                                        <span class="Fs12 FontAdamantiumBold Gray"><h:outputText value=" " /> </span> <br />
                                                                                <span class="Fs20 FontAdamantiumBold">
                                                                                    <h:outputText value="$ # {presupuestoRubroController.obtenerTotalGeneral()}" >
                                                                                        <f:convertNumber pattern="#0.00" />
                                                                                    </h:outputText>
                                                                                </span> <br />
                                                                        <span class="Fs11 FontAdamantiumBold Blue"> <h:outputText value="Total Presupuestado" />  </span>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                        </div>-->

                                                    </p:outputPanel>

                                                    <div class="Separator" />

                                                    <!-- GRAFICOS -->

                                                    <p:panelGrid columns="2" layout="grid" styleClass="Mar5" >

                                                        <p:chart type="pie" id="caportes" model="#{presupuestoRubroController.pieModel}" style="width:100%;height:300px"  />

                                                        <p:chart type="pie" id="crubros" model="#{presupuestoRubroController.pieModelRubro}" style="width:100%;height:300px" />

                                                    </p:panelGrid>
                                                </div>
                                            </div>



                                        </h:form>

                                    </p:tab>

                                    <p:tab id="tabequipotrabajo" title="Equipo de Trabajo">

                                        <h:form id="formTabEquipoTrabajo">

                                            <div class="Container100">
                                                <div class="ContainerIndent">
                                                    <div class="Card">
                                                        <div class="CardTopic">
                                                            <i class="fa fa-group Fs30 Fleft MarRight10"></i>
                                                            <div class="EmptyBox10 ShowOnMobile"></div>
                                                            Miembros del Equipo de Trabajo
                                                            <br />
                                                            <span class="CardSubTopic">Agregar las personas que trabajarán en el proyecto.</span>
                                                        </div>

                                                        <div class="SeparatorFull"></div>

                                                        <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank MarBot20 Wid100">
                                                            <p:outputLabel for="advancedfiltroa" value="Ingrese N° de Documento / Cuil " styleClass="DispBlock MarTop10 FontAdamantiumBold" />
                                                            <p:selectOneMenu  id="advancedfiltroa" value="#{agenteViewController.selected}" filter="true" filterMatchMode="contains"    >
                                                                <!--<p:ajax update="@this, agregaraequipo" />-->
                                                                <p:ajax update="agregaraequipo" />
                                                                <f:selectItems value="#{agenteViewController.itemsAvailableSelectOne}"  />

                                                            </p:selectOneMenu>

                                                            <h:panelGrid columns="2" id="agenteselecciona" >
                                                                <p:commandButton title="Agregar al Equipo de Trabajo de la Idea-Proyecto" icon="fa fa-plus" id="agregaraequipo" immediate="true" update="agentesa" action="#{proyectoAgenteController.agregarEquipo}" disabled="${empty agenteViewController.selected.apellido ? 'true' : 'false'}" styleClass="GreenButton White" style="width: auto; " />
                                                                <p:commandButton title="Nueva Persona" icon="fa fa-user-plus" onclick="PF('dregistrar').show();" styleClass="CyanButton White" style="width: auto; " />
                                                            </h:panelGrid>
                                                        </p:panelGrid>


                                                        <p:dataTable id="agentesa" value="#{proyectoAgenteController.equipotrabajo}"
                                                                     var="agentea" editable="true" editMode="cell"
                                                                     rowIndexVar="indice"
                                                                     rowStyleClass="#{(indice mod 2) eq 0 ? 'filaResaltada1' : 'filaResaltada2'}"
                                                                     styleClass="tabla tablaAjustada TablaColorEncabezado">
                                                            <p:column styleClass="TexAlCenter">
                                                                <f:facet name="header">
                                                                    <h:outputText value="Cuil"/>
                                                                </f:facet>
                                                                <h:outputText value="#{agentea.agente.cuil}"/>
                                                            </p:column>
                                                            <p:column styleClass="TexAlCenter">
                                                                <f:facet name="header">
                                                                    <h:outputText value="Nombre y Apellido"/>
                                                                </f:facet>
                                                                <h:outputText value="#{agentea.agente.apellido}, #{agentea.agente.nombres}"/>
                                                            </p:column>

                                                            <p:column styleClass="TexAlCenter" >
                                                                <f:facet name="header">
                                                                    <h:outputText value="Función en el Proyecto" style="font-weight: bold;" title="Ingrese la función del agente en el proyecto." />
                                                                    <br />
                                                                    <p:commandButton id="ayudaFuncion" icon="fa fa-question" styleClass="CyanButton White"  action="#{ayudaController.setearTextoAyudaPorClave('AyudaIPEquipoTrabajoColFuncion')}" oncomplete="PF('wdialogoAyuda').show();" update="dialogoAyuda" style="height: 15px; " />
                                                                    <p:overlayPanel for="ayudaFuncion" showEvent="mouseover" hideEvent="mouseout" hideEffect="fade" >
                                                                        <h:outputText value="Ingrese la función del agente en el proyecto." />
                                                                    </p:overlayPanel>
                                                                </f:facet>
                                                                <p:cellEditor>
                                                                    <f:facet name="output">
                                                                        <!--<h:outputLabel id="outputfuncion" value="# {agentea.funcionproyecto}" title="Función a cumplir por el agente en el proyecto." />-->
                                                                        <p:inputText id="outputfuncion" value="#{agentea.funcionproyecto}" title="Función que va cumplir el agente en el proyecto." />
                                                                        <p:tooltip id="toolTipOutputFuncion" for="outputfuncion" showEvent="focus" hideEvent="blur" />
                                                                    </f:facet>
                                                                    <f:facet name="input">
                                                                        <p:inputText id="ifuncion" value="#{agentea.funcionproyecto}" title="Función que va cumplir el agente en el proyecto." />
                                                                        <p:tooltip id="toolTipInputFuncion" for="ifuncion" showEvent="focus" hideEvent="blur" />
                                                                    </f:facet>
                                                                </p:cellEditor>
                                                            </p:column>

                                                            <p:column styleClass="TexAlCenter" style="vertical-align: middle;" >
                                                                <f:facet name="header">
                                                                    <h:outputText value="Participación" style="font-weight: bold;" title="Click e indique si el agente es consultor externo." />
                                                                    <br />
                                                                    <p:commandButton id="ayudaParticipacion" icon="fa fa-question" styleClass="CyanButton White" action="#{ayudaController.setearTextoAyudaPorClave('AyudaIPEquipoTrabajoColParticipacion')}" oncomplete="PF('wdialogoAyuda').show();"  update="dialogoAyuda" style="height: 15px; " />
                                                                    <p:overlayPanel for="ayudaParticipacion" showEvent="mouseover" hideEvent="mouseout" hideEffect="fade" >
                                                                        <h:outputText value="Indique si el agente es docente o consultor externo haciendo click en el botón." />
                                                                    </p:overlayPanel>
                                                                </f:facet>
                                                                <p:cellEditor>
                                                                    <f:facet name="output">
                                                                        <!--<p:selectBooleanCheckbox  id="ssconsultorexterno" value="# {agentea.consultorexterno}" style="width:20px; " />-->
                                                                        <p:selectBooleanButton onLabel="Consultor" offLabel="Docente" id="oconsultorexterno" value="#{agentea.consultorexterno}" styleClass="#{agentea.consultorexterno eq 'TRUE' ? 'OrangeButton':'PurpleButton'}"   >
                                                                            <!--<p:ajax update="@this :formprincipal:tabviewTodo:agentesa"  />-->
                                                                        </p:selectBooleanButton>
                                                                        <!--<h:outputLabel  id="labelConsultorexterno" value="# {agentea.consultorexterno eq 'TRUE' ? ' Consultor ':' Docente '}" style="font-size: 18px; "  />-->
                                                                    </f:facet>
                                                                    <f:facet name="input">
                                                                        <p:selectBooleanButton onLabel="Consultor" offLabel="Docente" id="sconsultorexterno" value="#{agentea.consultorexterno}"
                                                                                               styleClass="#{agentea.consultorexterno eq 'TRUE' ? 'OrangeButton':'PurpleButton'}"  >
                                                                            <p:ajax update="@this oconsultorexterno ihorasdisponibles horasdedicacion" listener="#{proyectoController.resetearIPValorHorasDedicadas(agentea)}"  />
                                                                        </p:selectBooleanButton>
                                                                        <!--                                                                <p:selectBooleanCheckbox  id="sconsultorexterno" value="# {agentea.consultorexterno}" style="width:20px; " >
                                                                                                                                        <p:ajax update="ssconsultorexterno labelConsultorexterno labelConsultorexterno2 ihorasdisponibles horasdedicacion" oncomplete="$(function(){PrimeFaces.focus(':tabviewTodo:formTabEquipoTrabajo:horasdedicacion');});"  />
                                                                                                                                    </p:selectBooleanCheckbox>-->
                                                                        <!--<h:outputLabel  id="labelConsultorexterno2" value="# {agentea.consultorexterno eq 'TRUE' ? ' Consultor ':' Docente '}"  style="font-size: 18px; " />-->
                                                                    </f:facet>
                                                                </p:cellEditor>
                                                            </p:column>
                                                            <p:column styleClass="TexAlCenter">
                                                                <f:facet name="header">
                                                                    <h:outputText value="Dedicación [hs/semana]" style="font-weight: bold;" title="Ingrese las horas dedicadas al proyecto por semana." />
                                                                    <br />
                                                                    <p:commandButton id="ayudaDedicacion" icon="fa fa-question" styleClass="CyanButton White" action="#{ayudaController.setearTextoAyudaPorClave('AyudaIPEquipoTrabajoColHsDedicacion')}" oncomplete="PF('wdialogoAyuda').show();"  update="dialogoAyuda" style="height: 15px; "  />
                                                                    <p:overlayPanel for="ayudaDedicacion" showEvent="mouseover" hideEvent="mouseout" hideEffect="fade" >
                                                                        <h:outputText value="Ingrese las horas dedicadas al proyecto por semana." />
                                                                    </p:overlayPanel>
                                                                </f:facet>
                                                                <p:cellEditor>
                                                                    <f:facet name="output">
                                                                        <!--<h:outputText id="horasdedicacion" value="# {agentea.horasdisponibles}" title="Horas que va a dedicar el agente al proyecto por semana." />-->
                                                                        <p:inputText id="horasdedicacion" value="#{agentea.horasdisponibles}" disabled="#{agentea.consultorexterno eq 'FALSE'}" maxlength="2" size="2"  title="Horas que va a dedicar el agente al proyecto por semana." />
                                                                        <p:tooltip id="toolTipHorasDedicacion" for="horasdedicacion" showEvent="focus" hideEvent="blur" />
                                                                    </f:facet>
                                                                    <f:facet name="input">
                                                                        <p:inputText id="ihorasdisponibles" value="#{agentea.horasdisponibles}" disabled="#{agentea.consultorexterno eq 'FALSE'}" maxlength="2" size="2"  title="Horas que va a dedicar el agente al proyecto por semana." />
                                                                        <p:tooltip id="toolTipInputHorasDedicacion" for="ihorasdisponibles" showEvent="focus" hideEvent="blur" />
                                                                    </f:facet>
                                                                </p:cellEditor>
                                                            </p:column>

                                                            <p:column>
                                                                <f:facet name="header">
                                                                    <h:outputText value="&nbsp;"/>
                                                                </f:facet>
                                                                <p:commandButton immediate="true" id="cborrara" icon="fa fa-trash" title="Quitar del Equipo de Trabajo" update="agentesa" styleClass="RedButton White" style="width: auto; "  >
                                                                    <p:collector value="#{agentea}" removeFrom="#{proyectoAgenteController.equipotrabajo}" unique="true"/>
                                                                </p:commandButton>
                                                            </p:column>
                                                        </p:dataTable>
                                                    </div>

                                                    <p:separator />
                                                    <br />
                                                    <div align="center">
                                                        <!--Antes tenia actionListener-->
                                                        <p:commandButton action="#{proyectoController.soloCrear}"
                                                                         value="Enviar Para Evaluación"
                                                                         update="growlprincipal"
                                                                         partialSubmit="true"
                                                                         ajax="true"
                                                                         process=":tabviewTodo:formTabIdeaProyecto,
                                                                          :tabviewTodo:formTabComitente,
                                                                          :tabviewTodo:formTabDocumentacion,
                                                                          :tabviewTodo:formTabConvocatoria,
                                                                          :tabviewTodo:formTabPresupuesto,
                                                                          @this"
                                                                         styleClass="GreenButton White" style="width: auto; " icon="fa fa-save"/>
                                                    </div>
                                                </div>
                                            </div>

                                        </h:form>

                                    </p:tab>
                                </p:tabView>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--***********************************-->
            <!--DIALOGO: EDITAR RESPONSABLE TECNICO-->
            <!--***********************************-->

            <h:form> 
                <p:growl globalOnly="true" for="growla" id="growla" showDetail="true" sticky="true" />
                <p:dialog id="dagenteeditar" widgetVar="dagenteeditar" modal="true"
                          header="Editar Responsable Técnico" responsive="true" resizable="false"
                          closable="true" closeOnEscape="true"  >

                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank">

                        <h:outputLabel value="Apellido" for="agenteapellido" />
                        <p:inputText id="agenteapellido" value="#{agenteController.selected.apellido}" />

                        <h:outputLabel value="Nombres" for="nombres" />
                        <p:inputText id="agentenombres" value="#{agenteController.selected.nombres}" />

                        <h:outputLabel value="Tipo de Documento" for="tipodocumentoid" />
                        <p:selectOneMenu id="agentetipodocumentoid" value="#{agenteController.selected.tipodocumentoid}"  >
                            <f:selectItems value="#{tipodocumentoController.itemsAvailableSelectOne}"/>
                        </p:selectOneMenu>

                        <h:outputLabel value="N° de Documento" for="numerodocumento" />
                        <p:inputText id="agentenumerodocumento" value="#{agenteController.selected.numerodocumento}" />

                        <h:outputLabel value="Telefono" for="agentetelefonoa" />
                        <p:inputText id="agentetelefonoa" value="#{agenteController.selected.telefono}" />

                        <h:outputLabel value="Celular" for="agentecelular" />
                        <p:inputText id="agentecelular" value="#{agenteController.selected.celular}" />

                        <h:outputLabel value="Email" for="agenteemaila" />
                        <p:inputText id="agenteemaila" value="#{agenteController.selected.email}" />

                        <h:outputLabel value="Otro Email" for="agenteotroemail" />
                        <p:inputText id="agenteotroemail" value="#{agenteController.selected.otroemail}" />

                        <h:outputLabel value="Profesion" for="agenteprofesion" />
                        <p:inputText id="agenteprofesion" value="#{agenteController.selected.profesion}" />

                        <h:outputLabel value="Especialidad" for="agenteespecialidad" />
                        <p:inputText id="agenteespecialidad" value="#{agenteController.selected.especialidad}" />

                        <h:outputLabel value="Domicilio" for="agentedomicilio" />
                        <p:inputText id="agentedomicilio" value="#{agenteController.selected.domicilio}" />

                        <h:outputLabel value="Dependencia" for="agentedependenciaid" />
                        <p:selectOneMenu id="agentedependenciaid" value="#{agenteController.selected.dependenciaid}" >
                            <f:selectItems value="#{dependenciaController.itemsAvailableSelectOne}"/>
                        </p:selectOneMenu>

                        <p:commandButton ajax="true" action="#{agenteController.solograbar()}" value="Editar" oncomplete="PF('dagenteeditar').hide();" update=":tabviewTodo:formTabComitente:pagente" />


                    </p:panelGrid>
                    <br />

                </p:dialog>
            </h:form>

            <!--************************-->
            <!--DIALOGO: CREAR COMITENTE-->
            <!--************************-->

            <h:form>
                <p:growl globalOnly="true" for="growlc" id="growlc" showDetail="true" sticky="true" />
                <p:dialog id="dcomitentecrear" widgetVar="dcomitentecrear" modal="true"  header="Crear Comitente" >

                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank">
                        <h:outputLabel value="Razon Social" for="comitenterazonsocial" />
                        <p:inputText id="comitenterazonsocial" value="#{comitenteController.selected.razonsocial}" />

                        <h:outputLabel value="CUIT/CUIL" for="comitentecuit" />
                        <p:inputMask id="comitentecuit" value="#{comitenteController.selected.cuit}" mask="99-99999999-9"/>

                        <h:outputLabel value="Teléfono" for="comitentetelefono" />
                        <p:inputText id="comitentetelefono" value="#{comitenteController.selected.telefono}" />

                        <h:outputLabel value="Contacto" for="comitentecontacto" />
                        <p:inputText id="comitentecontacto" value="#{comitenteController.selected.contacto}" />

                        <h:outputLabel value="Cargo del Contacto" for="comitentecargocontacto" />
                        <p:inputText id="comitentecargocontacto" value="#{comitenteController.selected.cargocontacto}" />

                        <h:outputLabel value="Email" for="comitenteemail" />
                        <p:inputText id="comitenteemail" value="#{comitenteController.selected.email}" />

                        <h:outputLabel value="Tipo de Comitente" for="comitentetipocomitenteid" />
                        <p:selectOneMenu id="comitentetipocomitenteid" value="#{comitenteController.selected.tipocomitenteid}" >
                            <f:selectItems value="#{tipocomitenteController.itemsAvailableSelectOne}"/>
                        </p:selectOneMenu>

                        <h:outputLabel value="Sector" for="comitentesectorid" />
                        <p:selectOneMenu id="comitentesectorid" value="#{comitenteController.selected.sectorid}" >
                            <f:selectItems value="#{sectorController.itemsAvailableSelectOne}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>
                    <br />
                    <p:commandButton action="#{comitenteController.soloCrear()}" value="Crear" oncomplete="PF('dcomitentecrear').hide()" update=":tabviewTodo:formTabComitente:phabilitarcomitente" styleClass="GreenButton" style="width: auto; " />
                </p:dialog>
            </h:form>

            <!--**************************-->
            <!--DIALOGO: INFO CONVOCATORIA-->
            <!--**************************-->

            <h:form id="formDialogoConvocatoria">
                <p:dialog id="dconvocatoria" widgetVar="dconvocatoria" modal="true"  header="Convocatoria" >

                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank">

                        <p:outputLabel value="Convocatoria:" for="convocatoria" />
                        <p:outputLabel id="convocatoria" value="#{convocatoriaController.selected.convocatoria}" title="Convocatoria" />

                        <p:outputLabel value="Descripcion:" for="descripcion" />
                        <p:outputLabel id="descripcion" value="#{convocatoriaController.selected.descripcion}" title="Descripcion" />

                        <p:outputLabel value="Link:" for="link" />
                        <p:outputLabel id="link" value="#{convocatoriaController.selected.link}" title="Link" />

                        <p:outputLabel value="Fechapublicacion:" for="fechapublicacion" />
                        <p:outputLabel id="fechapublicacion" value="#{convocatoriaController.selected.fechapublicacion}" title="Fechapublicacion" >
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
                        </p:outputLabel>

                        <p:outputLabel value="Fechainicio:" for="fechainicio" />
                        <p:outputLabel id="fechainicio" value="#{convocatoriaController.selected.fechainicio}" title="Fechainicio" >
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
                        </p:outputLabel>

                        <p:outputLabel value="Fechacierre:" for="fechacierre" />
                        <p:outputLabel id="fechacierre" value="#{convocatoriaController.selected.fechacierre}" title="Fechacierre" >
                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
                        </p:outputLabel>

                        <p:outputLabel value="Tipoproyectoid:" for="tipoproyectoidc" />
                        <p:outputLabel id="tipoproyectoidc" value="#{convocatoriaController.selected.tipoproyectoid.tipo}" title="Tipoproyectoid" >

                        </p:outputLabel>
                        <p:outputLabel value="Tipofinanciamientoid:" for="tipofinanciamientoidc" />

                        <p:outputLabel id="tipofinanciamientoidc" value="#{convocatoriaController.selected.tipofinanciamientoid.tipofinanciamiento}" title="Tipofinanciamientoid" >
                        </p:outputLabel> 

                        <p:outputLabel value="Organismo:" for="organismo" />
                        <p:outputLabel id="organismo" value="#{convocatoriaController.selected.organismo}" title="Organismo" />

                        <p:outputLabel value="Beneficiario:" for="beneficiario" />
                        <p:outputLabel id="beneficiario" value="#{convocatoriaController.selected.beneficiario}" title="Tipofinanciamientoid" />

                        <p:outputLabel value="Monto Financiamiento:" for="montofinanciamiento" />
                        <p:outputLabel id="montofinanciamiento" value="#{convocatoriaController.selected.montofinanciamiento}" title="MontoFinanciamiento" />

                        <p:outputLabel value="Estado:" for="estado" />
                        <p:outputLabel id="estado" value="#{convocatoriaController.selected.estado}" title="Estado" />
                    </p:panelGrid>
                </p:dialog>
            </h:form>

            <!--***************************-->
            <!--DIALOGO: DETALLES COMITENTE-->
            <!--***************************-->

            <h:form id="formDetallesComitente"> 
                <p:dialog id="detallesComitente" widgetVar="detallesComitente" modal="true"  header="Detalles del Comitente" responsive="true" >
                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" >
                        <p:outputLabel value="Razon Social" for="razonsocial" style="font-weight: bold;"/>
                        <p:outputLabel id="razonsocial" value="#{proyectoController.selected.comitenteid.razonsocial}" />

                        <p:outputLabel value="CUIT/CUIL" for="cuit" style="font-weight: bold;" />
                        <p:outputLabel id="cuit" value="#{proyectoController.selected.comitenteid.cuit}" />

                        <p:outputLabel value="Teléfono" for="detalletelefono" style="font-weight: bold;" />
                        <p:outputLabel id="detalletelefono" value="#{proyectoController.selected.comitenteid.telefono}" />

                        <p:outputLabel value="Contacto" for="contacto" style="font-weight: bold;"/>
                        <p:outputLabel id="contacto" value="#{proyectoController.selected.comitenteid.contacto}" />

                        <p:outputLabel value="Cargo del Contacto" for="cargocontacto" style="font-weight: bold;"/>
                        <p:outputLabel id="cargocontacto" value="#{proyectoController.selected.comitenteid.cargocontacto}" />

                        <p:outputLabel value="Email" for="detalleemail" style="font-weight: bold;"/>
                        <p:outputLabel id="detalleemail" value="#{proyectoController.selected.comitenteid.email}" />

                        <p:outputLabel value="Tipo de Comitente" for="tipo" style="font-weight: bold;"/>
                        <p:outputLabel id="tipo" value="#{proyectoController.selected.comitenteid.tipocomitenteid.tipocomitente}" />

                        <p:outputLabel value="Sector" for="sectorid" style="font-weight: bold;"/>
                        <p:outputLabel id="sectorid" value="#{proyectoController.selected.comitenteid.sectorid.sector}" />
                    </p:panelGrid>
                </p:dialog>
            </h:form>

            <!--***************************************-->
            <!--DIALOGO: EQUIPO TRABAJO - CREAR PERSONA-->
            <!--***************************************-->

            <h:form id="formresgistrar">
                <p:dialog id="dialogoregistrar" maximizable="false" 
                          minimizable="false"  header="Registrar Persona" closable="true"
                          resizable="false" widgetVar="dregistrar" >

                    <p:remoteCommand name="rcRegistrar" update="msgs" actionListener="#{agenteViewController.registrar}" />

                    <p:growl id="msgs" showDetail="true" />
                    
                    <p:panelGrid id="panel" columns="3" styleClass="ui-panelgrid-blank">

                        <h:outputLabel value="Apellido" for="apellido" />
                        <p:inputText maxlength="30" id="apellido" value="#{agenteViewController.agente1.apellido}" title="Apellido" required="true" />
                        <p:message for="apellido" /> 

                        <h:outputLabel value="Nombres" for="nombres" />
                        <p:inputText maxlength="45" id="nombres" value="#{agenteViewController.agente1.nombres}" title="Nombres" required="true" />
                        <p:message for="nombres" /> 

                        <p:outputLabel value="Tipo de Documento" for="tipodocumentoid" />
                        <p:selectOneMenu id="tipodocumentoid" value="#{agenteViewController.agente1.tipodocumentoid}" title="Tipo de Documento" required="true" >
                            <f:selectItems value="#{tipodocumentoController.itemsAvailableSelectOne}"/>
                        </p:selectOneMenu>
                        <p:message for="tipodocumentoid" /> 

                        <h:outputLabel value="N° de Documento" for="numerodocumento" />
                        <p:inputText id="numerodocumento" value="#{agenteViewController.agente1.numerodocumento}" title="Numero de Documento" required="true" />
                        <p:message for="numerodocumento" />

                        <h:outputLabel value="Cuil" for="cuil" />
                        <p:inputMask id="cuil" value="#{agenteViewController.agente1.cuil}" mask="99-99999999-9"/>
                        <p:message for="cuil" />           

                        <h:outputLabel value="Teléfono" for="telefono" />
                        <p:inputText id="telefono" value="#{agenteViewController.agente1.telefono}" title="Telefono" required="true" />
                        <p:message for="telefono" /> 

                        <h:outputLabel value="Celular" for="celular" />
                        <p:inputText id="celular" value="#{agenteViewController.agente1.celular}" title="Celular" required="false" />
                        <p:message for="celular" /> 

                        <h:outputLabel value="Email" for="email" />
                        <p:inputText id="email" value="#{agenteViewController.agente1.email}" validatorMessage="Email Incorrecto" required="true" >
                            <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                        </p:inputText>
                        <p:message for="email" /> 

                        <h:outputLabel value="Otro Email" for="otroemail" />
                        <p:inputText id="otroemail" value="#{agenteViewController.agente1.otroemail}" >
                            <!--   <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" /> -->
                        </p:inputText>   
                        <p:message for="otroemail" /> 

                        <h:outputLabel value="Domicilio" for="domicilio" />
                        <p:inputText maxlength="200"  id="domicilio" value="#{agenteViewController.agente1.domicilio}" title="Domicilio" required="true" />
                        <p:message for="domicilio" />

                        <h:outputLabel value="Profesion" for="profesion" />
                        <p:inputText maxlength="70" id="profesion" value="#{agenteViewController.agente1.profesion}" title="Profesion" required="true" />
                        <p:message for="profesion" /> 

                        <h:outputLabel value="Especialidad" for="especialidad" />
                        <p:inputText maxlength="70" id="especialidad" value="#{agenteViewController.agente1.especialidad}" title="Especialidad" required="true" />
                        <p:message for="especialidad" /> 

                        <p:commandButton onclick="rcRegistrar()" oncomplete="PF('dregistrar').hide()" update=":tabviewTodo:formTabEquipoTrabajo:agentesa,  :tabviewTodo:formTabEquipoTrabajo:advancedfiltroa" value="Crear" styleClass="GreenButton" style="width: auto; " />
                        <br />
                    </p:panelGrid>

                </p:dialog>

            </h:form>

            <!--************************-->
            <!--DIALOGO: AYUDAS EN LINEA-->
            <!--************************-->

            <p:dialog id="dialogoAyuda" widgetVar="wdialogoAyuda" maximizable="false" minimizable="false"  
                      header="Ayuda" closable="true" resizable="false" responsive="true"  >
                    <h:outputText value="#{ayudaController.textoAyuda}" />
            </p:dialog>

            <!--**************************-->
            <!--DIALOGO: FIN IDEA PROYECTO-->
            <!--**************************-->

            <h:form>
                <p:dialog id="dfinal" widgetVar="dfinal"  modal="true" closable="false"  header="Alta Idea-Proyecto Creada" >
                    Idea-Proyecto fue creada Satisfactoriamente!!!
                    <div align="center" >
                        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank">
                            <p:commandButton value="Imprimir" actionListener="#{proyectoController.pdfIdeaProyecto()}" ajax="false" styleClass="CyanButton" style="width: auto; "  />
                            <p:commandButton value="OK" ajax="false" action="List" oncomplete="#{proyectoController.reiniciarValoresSolicitud}" onclick="PF('dfinal').hide();" styleClass="GreenButton" style="width: auto; " />
                        </p:panelGrid>
                    </div>
                </p:dialog>
            </h:form>

        </ui:define>
    </ui:composition>

</html>
